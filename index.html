<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">

    <title>PayPal Google Calendar Demo</title>
  </head>
  <body>
    <h1>PayPal Google Calendar Demo:</h1>

    <div class="contact-info m-5 p-5">
      <form>
        <div class="form-group">
          <label for="first-name">First Name</label>
          <input type="text" class="form-control" id="first-name" placeholder="First Name">
        </div>
        <div class="form-group">
          <label for="last-name">Last Name</label>
          <input type="text" class="form-control" id="last-name" placeholder="Last name">
        </div>
        <div class="form-group">
          <label for="email">Email Address</label>
          <input type="email" class="form-control" id="email" aria-describedby="emailHelp" placeholder="Enter email">
          <small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small>
        </div>
        <div class="form-group">
          <label for="phone">Phone</label>
          <input type="number" class="form-control" id="phone" placeholder="Phone">
        </div>
        <div class="form-group">
            <label for="street">Address</label>
            <input type="text" class="form-control" id="street" placeholder="1234 Main St">
          </div>
          <div class="form-group">
            <label for="inputAddress2">Address 2</label>
            <input type="text" class="form-control" id="inputAddress2" placeholder="Apartment, studio, or floor">
          </div>
          <div class="form-row">
            <div class="form-group col-md-6">
              <label for="city">City</label>
              <input type="text" class="form-control" id="city">
            </div>
            <div class="form-group col-md-4">
              <label for="state">State</label>
                <select class="form-control" id="state" name="state">
                  <option value="">N/A</option>
                  <option value="AK">Alaska</option>
                  <option value="AL">Alabama</option>
                  <option value="AR">Arkansas</option>
                  <option value="AZ">Arizona</option>
                  <option value="CA">California</option>
                  <option value="CO">Colorado</option>
                  <option value="CT">Connecticut</option>
                  <option value="DC">District of Columbia</option>
                  <option value="DE">Delaware</option>
                  <option value="FL">Florida</option>
                  <option value="GA">Georgia</option>
                  <option value="HI">Hawaii</option>
                  <option value="IA">Iowa</option>
                  <option value="ID">Idaho</option>
                  <option value="IL">Illinois</option>
                  <option value="IN">Indiana</option>
                  <option value="KS">Kansas</option>
                  <option value="KY">Kentucky</option>
                  <option value="LA">Louisiana</option>
                  <option value="MA">Massachusetts</option>
                  <option value="MD">Maryland</option>
                  <option value="ME">Maine</option>
                  <option value="MI">Michigan</option>
                  <option value="MN">Minnesota</option>
                  <option value="MO">Missouri</option>
                  <option value="MS">Mississippi</option>
                  <option value="MT">Montana</option>
                  <option value="NC">North Carolina</option>
                  <option value="ND">North Dakota</option>
                  <option value="NE">Nebraska</option>
                  <option value="NH">New Hampshire</option>
                  <option value="NJ">New Jersey</option>
                  <option value="NM">New Mexico</option>
                  <option value="NV">Nevada</option>
                  <option value="NY">New York</option>
                  <option value="OH">Ohio</option>
                  <option value="OK">Oklahoma</option>
                  <option value="OR">Oregon</option>
                  <option value="PA">Pennsylvania</option>
                  <option value="PR">Puerto Rico</option>
                  <option value="RI">Rhode Island</option>
                  <option value="SC">South Carolina</option>
                  <option value="SD">South Dakota</option>
                  <option value="TN">Tennessee</option>
                  <option value="TX">Texas</option>
                  <option value="UT">Utah</option>
                  <option value="VA">Virginia</option>
                  <option value="VT">Vermont</option>
                  <option value="WA">Washington</option>
                  <option value="WI">Wisconsin</option>
                  <option value="WV">West Virginia</option>
                  <option value="WY">Wyoming</option>
                </select>
            </div>
            <div class="form-group col-md-2">
              <label for="zip">Zip</label>
              <input type="text" class="form-control" id="zip">
            </div>
          </div>
          <div class="tour-item">
            <h3 id="tour-title">Dune ATV Tour</h3>
            <h4 id="tour-date">2019-02-14</h4>
            <h5 id="tour-price">150.00</h5>
          </div>
        <!-- <button type="submit" class="btn btn-primary" id="purchase-btn">Buy Now</button> -->
      </form>
      <br/>
      <div id="paypal-button-container"></div>
<script src="https://www.paypalobjects.com/api/checkout.js"></script>
<script>
// Render the PayPal button
paypal.Button.render({
// Set your environment
env: 'sandbox', // sandbox | production

// Specify the style of the button
style: {
  layout: 'vertical',  // horizontal | vertical
  size:   'medium',    // medium | large | responsive
  shape:  'rect',      // pill | rect
  color:  'gold'       // gold | blue | silver | white | black
},

// Specify allowed and disallowed funding sources
//
// Options:
// - paypal.FUNDING.CARD
// - paypal.FUNDING.CREDIT
// - paypal.FUNDING.ELV
funding: {
  allowed: [
    paypal.FUNDING.CARD,
    paypal.FUNDING.CREDIT
  ],
  disallowed: []
},

// Enable Pay Now checkout flow (optional)
commit: true,

// PayPal Client IDs - replace with your own
// Create a PayPal app: https://developer.paypal.com/developer/applications/create
client: {
  sandbox: 'Afpe0-1Q3W1N-qRcIUF_9YyJ7iQXEq9R0_ukkN3Spc_eXoQ9NofkK1h0NAem9rWYUi-cLtOae3iv-r2W'
  // production: '<insert production client id>'
},

payment: function (data, actions) {
  const paymentPrice = parseInt(price.innerText, 10)
  return actions.payment.create({
    payment: {
      transactions: [
        {
          amount: {
            total: paymentPrice,
            currency: 'USD'
          }
        }
      ]
    }
  });
},

onAuthorize: function (data, actions) {
  return actions.payment.execute()
    .then(function () {
      console.log("payment went through")
      const CLIENT_ID = '788571287502-vnp4m235m3l4dt36bamoqtgme14h4pbv.apps.googleusercontent.com';
      const API_KEY = 'AIzaSyAGo0O2fXtTGqopZpNUdgQ4BGXmdXWYJ5w';

      console.log(data)
      // window.alert('Payment Complete!');
      const firstName = document.getElementById('first-name')
      const lastName = document.getElementById('last-name')
      const email = document.getElementById('email')
      const phone = document.getElementById('phone')
      const street = document.getElementById('street')
      const city = document.getElementById('city')
      const state = document.getElementById('state')
      const zip = document.getElementById('zip')
      const price = document.getElementById('tour-price')

      const eventID = data.orderID.toLowerCase()

      const buyer = {
          name: {
            first: firstName.value,
            last: lastName.value
          },
          email: email.value,
          phone: phone.value,
          address: {
            street: street.value,
            city: city.value,
            state: state.value,
            zip: zip.value
          }
        }

        console.log(buyer)
        console.log(eventID)

// Refer to the JavaScript quickstart on how to setup the environment:
// https://developers.google.com/calendar/quickstart/js
// Change the scope to 'https://www.googleapis.com/auth/calendar' and delete any
// stored credentials.

const event = {
  'id': eventID,
  'summary': 'Tour Booked',
  'location': 'Cabo San Lucas, Mexico',
  'description': document.getElementById('tour-title').innerText,
  'start': {
    'dateTime': document.getElementById('tour-date').innerText,
    'timeZone': 'America/Los_Angeles'
  },
  'end': {
    'dateTime': document.getElementById('tour-date').innerText,
    'timeZone': 'America/Los_Angeles'
  },
  'attendee': [
    {'email': 'goemailadrian@gmail.com'}
  ]
};
console.log(event)
var request = gapi.client.calendar.events.insert({
  'calendarId': 'adriankyzer@gmail.com',
  'resource': event
});

request.execute(function(event) {
  appendPre('Event created: ' + event.htmlLink);
});

    });
}
}, '#paypal-button-container');
</script>



    


      <!-- <script src="https://www.paypalobjects.com/api/checkout.js" async></script> -->
      <script src="https://apis.google.com/js/api.js"></script>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
    <script src="app.js"></script>
  </body>
</html>